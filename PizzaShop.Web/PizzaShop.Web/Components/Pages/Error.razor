@page "/Error"
@using System.Diagnostics

<PageTitle>Error</PageTitle>

<div class="min-h-screen bg-[#7f2615] text-[#fef3c7] flex items-center justify-center px-4 py-12">
  <div class="max-w-xl w-full rounded-3xl bg-black/25 shadow-2xl border border-[#fef3c7]/20 p-6 sm:p-8 space-y-5">
    <div class="flex items-center gap-3">
      <div class="flex h-11 w-11 items-center justify-center rounded-full bg-[#f97316] text-[#111827] shadow-md text-2xl font-extrabold">
        !
      </div>
      <div>
        <h1 class="text-2xl sm:text-3xl font-extrabold tracking-wide">
          Something melted in the Merry Crustmas kitchen.
        </h1>
        <p class="text-sm sm:text-base text-[#fee2b3]">
          An error occurred while processing your request. Our elves are already poking the oven.
        </p>
      </div>
    </div>

    @if (ShowRequestId)
    {
      <div class="rounded-2xl bg-black/40 px-4 py-3 text-xs sm:text-sm text-[#fef3c7]">
        <span class="font-semibold">Request ID:</span>
        <code class="ml-1 text-[0.72rem] break-all">@RequestId</code>
      </div>
    }

    <div class="space-y-2 text-xs sm:text-sm text-[#fee2b3]">
      <h2 class="font-semibold text-[#fef3c7]">For local workshop debugging</h2>
      <p>
        Swap to the <span class="font-semibold">Development</span> environment to see full error details.
      </p>
      <p>
        <span class="font-semibold">Don’t enable Development in production.</span>
        It can reveal sensitive information to guests. For local testing, set
        <span class="font-mono text-[0.7rem] bg-black/40 px-2 py-1 rounded">ASPNETCORE_ENVIRONMENT=Development</span>
        and restart the app.
      </p>
    </div>
  </div>
</div>

@code{
    [CascadingParameter]
    private HttpContext? HttpContext { get; set; }

    private string? RequestId { get; set; }
    private bool ShowRequestId => !string.IsNullOrEmpty(RequestId);

    protected override void OnInitialized() =>
        RequestId = Activity.Current?.Id ?? HttpContext?.TraceIdentifier;
}
